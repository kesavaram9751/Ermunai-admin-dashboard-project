<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Create Account</title>
    <link rel="stylesheet" href="user-create-acc.css" />
</head>

<body>
    <div class="wrap">
        <h2>Create Account</h2>
        <form id="signupForm">
            <input type="email" id="email" placeholder="Email" required />
            <input type="password" id="password" placeholder="Password (min 6 chars)" required />
            <button type="submit">Sign Up</button>
        </form>
        <p>Already have an account? <a href="user-login.html">Login</a></p>
        <p id="msg" class="msg"></p>
    </div>


    <!-- Page logic -->
<script type="module">
  // Firebase v9 modular imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCbfdG2XU302FuZx0MapVTRmb3Qtaa-hA8",
    authDomain: "ermunai-e-commerce-project.firebaseapp.com",
    projectId: "ermunai-e-commerce-project",
    storageBucket: "ermunai-e-commerce-project.appspot.com",
    messagingSenderId: "365240050790",
    appId: "1:365240050790:web:2d4867d6ab4f93a661f9a7",
    measurementId: "G-CZJZ4HLCMR"
  };

  // Init Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // If already logged in, go to home
  onAuthStateChanged(auth, (user) => {
    if (user) window.location.href = "index.html";
  });

  const form = document.getElementById('signupForm');
  const msg = document.getElementById('msg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.textContent = '';
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    try {
      await createUserWithEmailAndPassword(auth, email, password);
      msg.textContent = "Account created ✅ Redirecting…";
      msg.style.color = 'green';
      setTimeout(() => (window.location.href = "index.html"), 800);
    } catch (err) {
      msg.textContent = err.message;
      msg.style.color = 'crimson';
    }
  });
</script>

</body>

</html>