<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>User Login</title>
    <link rel="stylesheet" href="./css/user-login.css" />
</head>

<body>
    <div class="login-container">
        <h2>User Login</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required />
            <input type="password" id="password" placeholder="Password" required />
            <button type="submit">Login</button>
        </form>
        <p>Don't have an account? <a href="user-create-acc.html">Create Account</a></p>
        <p id="msg" class="msg"></p>
    </div>



    <!-- Page logic -->
<script type="module">
  // Firebase v9 modular imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCbfdG2XU302FuZx0MapVTRmb3Qtaa-hA8",
    authDomain: "ermunai-e-commerce-project.firebaseapp.com",
    projectId: "ermunai-e-commerce-project",
    storageBucket: "ermunai-e-commerce-project.appspot.com",
    messagingSenderId: "365240050790",
    appId: "1:365240050790:web:2d4867d6ab4f93a661f9a7",
    measurementId: "G-CZJZ4HLCMR"
  };

  // Init Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // If already logged in, go to home
  onAuthStateChanged(auth, (user) => {
    if (user) window.location.href = "index.html";
  });

  const form = document.getElementById('loginForm');
  const msg = document.getElementById('msg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.textContent = '';
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    try {
      await signInWithEmailAndPassword(auth, email, password);
      window.location.href = "index.html";
    } catch (err) {
      msg.textContent = err.message;
      msg.style.color = 'crimson';
    }
  });
</script>

</body>

</html>